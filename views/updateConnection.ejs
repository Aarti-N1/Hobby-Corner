<% 
var errorMap = (typeof errorMap == 'undefined') ? new Map() : errorMap; 
var detailsInvalidClass = (typeof errorMap != 'undefined' && errorMap.has('details'))?'err':'';
var addressInvalidClass = (typeof errorMap != 'undefined' && errorMap.has('address'))?'err':'';
var datetimepickInvalidClass = (typeof errorMap != 'undefined' && errorMap.has('datetimepick'))?'err':'';
%>
<!DOCTYPE html>
<html>
	<head>
		<title>Hobby Corner Connection Page</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="./../resources/css/bootstrap.min.css">
		<link rel="stylesheet" href="./../resources/css/common.css">
		<link rel="stylesheet" href="./../resources/css/connection.css">
		<link rel="stylesheet" href="./../resources/scripts/lib/jquery-ui-timepicker-addon.css">
		<link rel="stylesheet" href="./../resources/scripts/lib/jquery-ui.min.css">
		<link rel="stylesheet" href="./../resources/css/select2.min.css" />
	</head>
	<body>
		<script src="./../resources/scripts/lib/jquery-3.4.1.min.js" ></script>
    	<script src="./../resources/scripts/lib/popper.min.js"></script>
    	<script src="./../resources/scripts/lib/bootstrap.min.js" ></script>
    	<script src="./../resources/scripts/lib/jquery-ui.min.js" ></script>
    	<script src="./../resources/scripts/lib/jquery-ui-timepicker-addon.js" ></script>
    	<script src="./../resources/scripts/lib/newConnectionValidation.js" ></script>
    	<script src="./../resources/scripts/lib/select2.min.js"></script>
		<div class="page-container">
    		<div class="content-wrapper">
				<% include ./partials/header.ejs %>
    			<% include ./partials/navigation.ejs %>
				<div class="main-container">
					<div class="container">
						<form id="updateConnection-form" method="POST" action="/updateConnection" class="needs-validation" novalidate>
							<input type="hidden" id="connectionId" name="connectionId" value="<%=dataObj.connectionId%>">
							<div class="form-group row">
						    	<label for="topic" class="col-sm-2 col-form-label">Topic</label>
						    	<div class="col-sm-10">
									<input type="text" class="form-control" id="topic" name="topic" value="<%=dataObj.connectionTopic%>" readonly>
								</div>
							</div>
							<div class="form-group row">
								<label for="name" class="col-sm-2 col-form-label">Name</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" id="name" name="name" value="<%=dataObj.connectionName%>" readonly>
								</div>
							</div>
							<div class="form-group row">
								<label for="details" class="col-sm-2 col-form-label">Details</label>
								<div class="col-sm-10">
									<textarea class="form-control <%=detailsInvalidClass%>" id="details" name="details" rows="3"><%=dataObj.details%></textarea>
									<div class="inputValidationError">
										<%= errorMap.get('details')%>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label for="address">Address</label>
								<input type="text" class="form-control <%=addressInvalidClass%>" id="address" name="address" value="<%=dataObj.address%>">
								<div class="inputValidationError">
									<%= errorMap.get('address')%>
								</div>
							</div>
							<div class="form-group">
									<label for="datetimepick">When</label>
									<input id="datetimepick" name="datetimepick" class="form-control <%=datetimepickInvalidClass%>" type="text" value="<%=dataObj.dateTime%>"/>
							    	<div class="inputValidationError">
										<%= errorMap.get('datetimepick')%>
									</div>
 							</div>
							<button type="submit" class="btn btn-primary shadow">Update Connection</button>
						</form>

					</div>
				</div>
				<% include ./partials/footer.ejs %>
			</div>
		</div>
	</body>
</html>